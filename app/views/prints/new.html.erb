<div class="container">

<% if flash[:printer] && flash[:user] %>
  <div class="alert alert-success alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <%= t("success.html", :count => flash[:count], :printer => flash[:printer], :user => flash[:user]) %>
  </div>
<% elsif @print.errors.any? %>
  <div class="alert alert-danger alert-dismissable">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <strong><%= t(:something_bad_happened) %></strong>
    <ul>
      <% @print.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="row">
  <div class="col-lg-12 advertisement">
    <!-- OpenX body script -->
    <script type="text/javascript">
        OX_731328f5e6.showAdUnit("536881370");
    </script><noscript><iframe id="731328f5e6" name="731328f5e6" src="//ox-d.oncampusweb.com/w/1.0/afr?auid=536881370&cb=INSERT_RANDOM_NUMBER_HERE" frameBorder="0" frameSpacing="0" scrolling="no" width="728" height="90"><a href="//ox-d.oncampusweb.com/w/1.0/rc?cs=731328f5e6&cb=INSERT_RANDOM_NUMBER_HERE"><img src="//ox-d.oncampusweb.com/w/1.0/ai?auid=536881370&cs=731328f5e6&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe></noscript>
  </div>
</div>

<br/>

<h5 class="text-center">
*Print@CU has migrated to the new NINJA printing system and thus will not work for those printers that still utilize the old printing system.
</h5>

<br/>
<br/>

<%= form_for @print do |f| %>

<div id="area" class="row">
  <div class="choose-destination col-sm-3 col-lg-3">
    <div class="row">
      <div class="col-lg-12">
        <div class="input-group">
          <span class="input-group-addon">Uni</span>
          <%= f.text_field :uni, :class => "form-control" %>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <h5>Building</h5>
        <%= f.select(:building, buildings, {:selected => choose_building}, {:class => "form-control", :onload => 'changePrinters()', :onchange => 'changePrinters()'}) %>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col-lg-12">
        <h5>Printer</h5>
        <div class="printer-group text-center" data-toggle="buttons">
           <% default_printers.each_with_index do |printer, index| %>
            <% if index == 0 %>
              <label class="btn btn-primary printer-button active">
                <input type="radio" name="printer" value="<%= printer %>" checked> <%= printer %>
              </label>
            <% else %>
              <label class="btn btn-primary printer-button">
                <input type="radio" name="printer" value="<%= printer %>"><%= printer %>
              </label>
            <% end %>
          <% end %>
        </div>
      </div>
    </div>
  </div>      
  <div class="col-sm-1 col-lg-1"><br><span class="hidden-xs divider">&raquo;</span></div>
  <div class="col-sm-4 col-lg-4">
    <%
      policy, signature = $filepicker.policy(['pick', 'read', 'store'])
    %>
    <input id="filepicker" name="urls" data-fp-policy="<%= policy %>" data-fp-signature="<%= signature %>" data-fp-apikey="<%= $filepicker.api_key %>" type="filepicker-dragdrop" data-fp-multiple="true" data-fp-drag-class="col-xs-12 printatcu-dragdrop" data-fp-extensions="<%= ALL_EXTENSIONS.join(",") %>" data-fp-button-class="btn btn-primary btn-block btn-lg" onchange="checkFileType(event.fpfiles)"/>
  </div>
  <div class="col-sm-1 col-lg-1"><br><span class="hidden-xs divider">&raquo;<br><br></span></div>
  <div class="col-sm-3 col-lg-3">
    <%= f.submit(:class => "btn btn-success btn-lg btn-block") %>
    <div class="pdf-warning hidden">
      <h4>For best results, upload a PDF.</h3>
    </div>

    <div class="checkbox">
      <%= f.label(:collate) do %>
        <%= f.check_box :collate %>
        <%= t("helpers.label.print.collate") %>
      <% end %>
    </div>

    <div class="checkbox">
      <%= f.label(:double_sided) do %>
        <%= f.check_box :double_sided %>
        <%= t("helpers.label.print.double_sided") %>
      <% end %>
    </div>

    <div class="input-group">
      <span class="input-group-addon">Copies:</span>
      <%= f.number_field :copies, :class => "form-control", placeholder: 1, maxlength: 2, :in => 1..99 %>
    </div>

    <div class="printing-quota">
        <a href="https://wwwapp.cc.columbia.edu/atg/PageServer" target="_blank" class="btn btn-info">Check Your Printing Quota</a>
    </div>
  </div>
</div>

<% end %>
<br/>
<br/>
<h5 class="text-center">
Notes on the new CUIT NINJA printing system:<br/><br/>
- All printers will eventually be on the new system.<br/>
- Single-sided printing and multi-selection of jobs are pending.<br/>
- Jobs sent with the uni field filled out can be accessed under the Cloud jobs of your account at any printer after a short delay.<br/>
- Jobs sent without the uni field, the print jobs will be sent to the global queue at the selected printer rather than to your account.<br/>
</h5>

<br/>
<br/>

<div class="row">
  <div class="col-lg-4"></div>
  <div class="col-lg-4 advertisement">
    <!-- OpenX body script -->
    <script type="text/javascript">
        OX_731328f5e6.showAdUnit("536881372");
    </script><noscript><iframe id="731328f5e6" name="731328f5e6" src="//ox-d.oncampusweb.com/w/1.0/afr?auid=536881372&cb=INSERT_RANDOM_NUMBER_HERE" frameBorder="0" frameSpacing="0" scrolling="no" width="300" height="250"><a href="//ox-d.oncampusweb.com/w/1.0/rc?cs=731328f5e6&cb=INSERT_RANDOM_NUMBER_HERE"><img src="//ox-d.oncampusweb.com/w/1.0/ai?auid=536881372&cs=731328f5e6&cb=INSERT_RANDOM_NUMBER_HERE" border="0" alt=""></a></iframe></noscript>
  </div>
  <div class="col-lg-4"></div>
</div>

</div>
